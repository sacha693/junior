<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…ç·’æº«åº¦è¨ˆï¼šé»ƒé‡‘æ³•å‰‡åæ€å·¥å…·</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¼‰å…¥ Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* è¨­å®šä¸»è¦å­—é«”ç‚ºæ€æºé»‘é«” (Noto Sans TC) */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f7f7f7;
        }
        /* è‡ªå®šç¾©æº«åº¦è¨ˆæ¨£å¼ */
        .temp-bar-container {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 9999px;
            overflow: hidden;
        }
        .temp-bar {
            height: 100%;
            transition: width 0.3s ease-in-out, background-color 0.3s ease-in-out;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen flex items-center justify-center">

    <div class="w-full max-w-2xl bg-white shadow-2xl rounded-xl p-6 sm:p-10 border-t-4 border-indigo-600">
        
        <!-- æ¨™é¡Œèˆ‡å°ˆæ¥­èªªæ˜ -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-indigo-800 flex items-center justify-center">
                <i data-lucide="thermometer" class="w-8 h-8 mr-3 text-indigo-600"></i>
                æƒ…ç·’æº«åº¦è¨ˆï¼šé»ƒé‡‘æ³•å‰‡åæ€
            </h1>
            <p class="mt-2 text-gray-600 text-sm sm:text-base">
                æˆ‘å€‘ä¸€èµ·å°‡ã€Œå·±æ‰€ä¸æ¬²ï¼Œå‹¿æ–½æ–¼äººã€é€™æ¢ç¤¾æœƒè¦å‰‡å…·é«”åŒ–ã€‚è«‹è¨˜éŒ„ä½ çš„æ„Ÿå—ï¼
            </p>
        </header>

        <!-- è¼¸å…¥è¡¨å–® -->
        <form id="emotionForm" class="space-y-6">
            
            <!-- 1. æƒ…å¢ƒ/è¡Œç‚ºç´€éŒ„ -->
            <div>
                <label for="event" class="block text-lg font-medium text-gray-700 mb-1">
                    1. ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿï¼ˆåˆ¥äººå°ä½ åšäº†ä»€éº¼ï¼Ÿï¼‰
                </label>
                <input type="text" id="event" name="event" required placeholder="ä¾‹å¦‚ï¼šåŒå­¸çªç„¶æ‹¿èµ°æˆ‘çš„ç•«ç­†"
                       class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base">
            </div>

            <!-- 2. å…·é«”æ„Ÿå—é¸æ“‡ -->
            <div>
                <label for="emotionType" class="block text-lg font-medium text-gray-700 mb-1">
                    2. ä½ çš„å…·é«”æ„Ÿå—æ˜¯ä»€éº¼ï¼Ÿ
                </label>
                <select id="emotionType" name="emotionType" required 
                        class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-base bg-white">
                    <option value="" disabled selected>è«‹é¸æ“‡ä¸€ç¨®æ„Ÿå—</option>
                    <option value="ç”Ÿæ°£">ğŸ”¥ ç”Ÿæ°£ (æ†¤æ€’ã€ä¸æ»¿)</option>
                    <option value="é›£é">ğŸ’§ é›£é (æ²®å–ªã€å‚·å¿ƒ)</option>
                    <option value="å®³æ€•">ğŸ˜¨ å®³æ€• (ç„¦æ…®ã€ä¸å®‰)</option>
                    <option value="ä¸èˆ’æœ">ğŸ¤• ä¸èˆ’æœ (èº«é«”æˆ–å¿ƒç†ä¸Šçš„è¢«ä¾µçŠ¯æ„Ÿ)</option>
                    <option value="è¢«å¿½ç•¥">ğŸ‘» è¢«å¿½ç•¥ (å­¤å–®ã€ä¸é‡è¦)</option>
                </select>
            </div>

            <!-- 3. æ„Ÿå—å¼·åº¦æ»‘æ¡¿ -->
            <div>
                <label for="intensity" class="block text-lg font-medium text-gray-700 mb-1">
                    3. æ„Ÿå—çš„å¼·åº¦æ˜¯å¤šå°‘ï¼Ÿï¼ˆ1-10åˆ†ï¼‰
                    <span id="intensityValue" class="text-indigo-600 font-bold ml-2">5</span>
                </label>
                <input type="range" id="intensity" name="intensity" min="1" max="10" value="5"
                       class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg">
            </div>
            
            <!-- æäº¤æŒ‰éˆ• -->
            <button type="submit" 
                    class="w-full flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out">
                <i data-lucide="zap" class="w-5 h-5 mr-2"></i>
                é€²è¡Œåæ€èˆ‡è¦å‰‡å»ºç«‹
            </button>
        </form>

        <!-- åæ€çµæœé¡¯ç¤ºå€ -->
        <div id="reflectionOutput" class="mt-10 pt-6 border-t border-gray-200 hidden">
            <!-- åæ€å¡ç‰‡å°‡æœƒè¢« JS æ’å…¥é€™è£¡ -->
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– Lucide Icons
        lucide.createIcons();

        const form = document.getElementById('emotionForm');
        const intensityInput = document.getElementById('intensity');
        const intensityValueSpan = document.getElementById('intensityValue');
        const reflectionOutput = document.getElementById('reflectionOutput');

        // æ›´æ–°æ»‘æ¡¿æ•¸å€¼é¡¯ç¤º
        intensityInput.addEventListener('input', (e) => {
            intensityValueSpan.textContent = e.target.value;
        });

        // è¼”åŠ©å‡½æ•¸ï¼šæ ¹æ“šå¼·åº¦ç²å–é¡è‰²
        function getTempColor(intensity) {
            if (intensity >= 8) return 'bg-red-500';
            if (intensity >= 5) return 'bg-orange-400';
            return 'bg-green-400';
        }

        // è¼”åŠ©å‡½æ•¸ï¼šæ ¹æ“šå¼·åº¦ç²å–å»ºè­°
        function getSuggestion(intensity) {
            if (intensity >= 8) {
                return 'é€™æ˜¯ä¸€å€‹ã€Œå±éšªç´šåˆ¥ã€çš„è² é¢æ„Ÿå—ã€‚é€™é¡è¡Œç‚ºå°ä½ é€ æˆäº†æ¥µå¤§å›°æ“¾ã€‚è«‹å°‡æ­¤è¡Œç‚ºåˆ—ç‚ºç¤¾æœƒäº’å‹•ä¸­çš„ã€Œé ­è™Ÿç¦å€ã€ã€‚';
            }
            if (intensity >= 5) {
                return 'é€™æ˜¯ä¸€å€‹ã€Œè­¦æˆ’ç´šåˆ¥ã€çš„æ„Ÿå—ã€‚åˆ¥äººåšå‡ºé¡ä¼¼è¡Œç‚ºæ™‚ï¼Œä½ æ„Ÿåˆ°æ˜é¡¯çš„ä¸èˆ’æœã€‚æˆ‘å€‘å¿…é ˆé¿å…å°åˆ¥äººåšå‡ºåŒæ¨£çš„äº‹ã€‚';
            }
            return 'é€™æ˜¯ä¸€å€‹ã€Œè¼•å¾®ä¸é©ã€çš„æ„Ÿå—ã€‚é›–ç„¶ä¸æ„‰å¿«ï¼Œä½†å½±éŸ¿è¼ƒå°ã€‚é€™æé†’æˆ‘å€‘ï¼Œå³ä½¿æ˜¯å°äº‹ï¼Œä¹Ÿè¦è€ƒæ…®åˆ¥äººçš„æ„Ÿå—ã€‚';
        }

        // è¡¨å–®æäº¤è™•ç†
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            const event = document.getElementById('event').value.trim();
            const emotionType = document.getElementById('emotionType').value;
            const intensity = parseInt(intensityInput.value, 10);
            const tempColor = getTempColor(intensity);
            const suggestion = getSuggestion(intensity);

            if (!event || !emotionType) {
                 // é€™è£¡æˆ‘å€‘ä¸ä½¿ç”¨ alert(), è€Œæ˜¯ä½¿ç”¨è‡ªå®šç¾©çš„æ¶ˆæ¯æç¤ºï¼Œä½†ç‚ºç°¡æ½”æ€§ï¼Œé€™æ¬¡åªåš console log
                console.error("è«‹ç¢ºä¿å¡«å¯«äº†æƒ…å¢ƒå’Œæ„Ÿå—é¡å‹ã€‚");
                return;
            }

            // ç”Ÿæˆåæ€å¡ç‰‡å…§å®¹
            const cardHtml = `
                <div class="bg-indigo-50 border-2 border-indigo-200 rounded-xl p-6 space-y-4 shadow-lg">
                    
                    <!-- åæ€çµè«– -->
                    <h2 class="text-2xl font-bold text-indigo-700 flex items-center">
                        <i data-lucide="lightbulb" class="w-6 h-6 mr-2 text-yellow-500 fill-yellow-500"></i>
                        é»ƒé‡‘æ³•å‰‡ï¼šåæ€çµè«–
                    </h2>

                    <!-- æ„Ÿå—é‡åŒ–é¡¯ç¤º -->
                    <div class="bg-white p-4 rounded-lg shadow-md border border-gray-100">
                        <p class="text-gray-700 font-medium">åˆ¥äººåšäº†ï¼š<span class="font-semibold text-indigo-800">${event}</span></p>
                        <p class="text-gray-700 font-medium mt-1">ä½ çš„æ„Ÿå—æ˜¯ï¼š<span class="font-semibold text-red-600">${emotionType}</span></p>
                        
                        <p class="text-gray-700 font-medium mt-3">æ„Ÿå—å¼·åº¦ï¼š<span class="font-semibold">${intensity}/10 åˆ†</span></p>
                        <div class="temp-bar-container mt-1">
                            <div class="temp-bar ${tempColor}" style="width: ${intensity * 10}%"></div>
                        </div>
                    </div>
                    
                    <!-- å°ˆæ¥­å…§åŒ–è§£é‡‹å€ -->
                    <div class="bg-white p-4 rounded-lg shadow-md border border-gray-100">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">
                            <i data-lucide="link" class="w-5 h-5 mr-1 inline-block"></i>
                            æˆ‘å€‘çš„è¦å‰‡é€£çµ (Rule Linkage)
                        </h3>
                        <p class="text-lg leading-relaxed text-gray-800 border-l-4 border-indigo-400 pl-3 py-1 bg-indigo-100/50 rounded-r-md">
                            ğŸ’¡ å› ç‚º <span class="font-extrabold text-red-600">${event}</span> è®“ä½ æœ‰äº† <span class="font-extrabold text-red-600">${intensity}/10 åˆ†çš„ ${emotionType}</span> æ„Ÿå—ï¼Œ<br>
                            æ‰€ä»¥ï¼Œæˆ‘å€‘çµ•ä¸èƒ½ç”¨é¡ä¼¼çš„**è¡Œç‚º**å°å¾…åˆ¥äººï¼
                        </p>
                        
                        <p class="mt-4 text-sm text-gray-600">
                           ${suggestion}
                        </p>
                    </div>

                    <!-- å»ºè­°çš„æ›¿ä»£è¡Œç‚º -->
                    <div class="bg-green-100 p-4 rounded-lg border-2 border-green-300">
                        <h3 class="text-xl font-bold text-green-800 mb-2 flex items-center">
                            <i data-lucide="check-circle" class="w-6 h-6 mr-2 text-green-600 fill-green-600/20"></i>
                            æˆ‘å€‘å¯ä»¥é€™æ¨£åš (æ›¿ä»£è¡Œç‚º)
                        </h3>
                        <p class="text-gray-800">
                            ä¸‹æ¬¡ç•¶ä½ æƒ³åš <span class="font-semibold text-indigo-800">ã€Œ${event}ã€</span> é€™æ¨£é¡ä¼¼çš„è¡Œç‚ºæ™‚ï¼Œè«‹è¨˜å¾—**åœä¸‹ä¾†**ï¼Œç„¶å¾Œé¸æ“‡ï¼š
                        </p>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700 ml-4">
                            <li>è©¢å•ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‹¿å–æˆ–æ‰“æ–·ã€‚</li>
                            <li>é›¢é–‹ç¾å ´ï¼Œé é›¢æœƒå¼•ç™¼è¡å‹•çš„åœ°æ–¹ã€‚</li>
                            <li>å¦‚æœéœ€è¦ç™¼è¨€ï¼Œè«‹ç”¨æº«å’Œä¸”éæ‰¹åˆ¤çš„èªæ°£ã€‚</li>
                        </ul>
                    </div>

                    <!-- æŒ‰éˆ•ï¼šå†åšä¸€æ¬¡åæ€ -->
                    <div class="text-center pt-4">
                         <button type="button" onclick="resetForm()" 
                                 class="px-4 py-2 text-sm font-medium rounded-full text-indigo-600 bg-white border border-indigo-300 hover:bg-indigo-50 transition duration-150">
                             é€²è¡Œä¸‹ä¸€å€‹æƒ…å¢ƒåˆ†æ
                         </button>
                    </div>
                </div>
            `;
            
            reflectionOutput.innerHTML = cardHtml;
            reflectionOutput.classList.remove('hidden');
            lucide.createIcons(); // é‡æ–°åˆå§‹åŒ–æ–°åŠ è¼‰çš„åœ–æ¨™
        });

        // é‡ç½®è¡¨å–®å’Œçµæœ
        window.resetForm = function() {
            form.reset();
            intensityValueSpan.textContent = '5';
            reflectionOutput.classList.add('hidden');
            reflectionOutput.innerHTML = '';
            document.getElementById('event').focus();
        };

        // ç¢ºä¿åˆå§‹è¼‰å…¥æ™‚çš„åœ–æ¨™
        window.onload = function() {
            lucide.createIcons();
        };

    </script>
</body>
</html>
